<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><link rel="icon" href="/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Shallow copy and deep copy | Jon Ganebski</title><script type="module" async="" crossorigin="" src="/assets/app.e087ca85.js"></script><link rel="modulepreload" href="/assets/vendor.929f9304.js"><style>p[data-v-c4905ff2-s]{font-size:.9rem}.nav[data-v-7ba004c0]>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.nav[data-v-7ba004c0]{margin-top:1rem}.icon[data-v-7ba004c0]{display:inline-block;font-size:1.125rem;line-height:1.75rem}.recent-post-link[data-v-7ba004c0]{cursor:pointer;display:block;font-size:.875rem;line-height:1.25rem;--tw-text-opacity:1;color:rgba(75,85,99,var(--tw-text-opacity));overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;text-underline-offset:2px;width:100%}.recent-post-link[data-v-7ba004c0]:hover{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity));-webkit-text-decoration-line:underline;text-decoration-line:underline}.nav[data-v-4681b89c]{display:flex;gap:1.5rem;width:fit-content;transform-origin:right;transform:translate(-100%) rotate(-90deg)}*,:after,:before{-webkit-box-sizing:border-box;box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}*{--tw-ring-inset:var(--tw-empty, );--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59, 130, 246, .5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000}:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}a{color:inherit;text-decoration:inherit}body{margin:0;font-family:inherit;line-height:inherit}button{font-family:inherit;font-size:100%;line-height:1.15;margin:0;padding:0;line-height:inherit;color:inherit}button{text-transform:none;background-color:transparent;background-image:none}button{-webkit-appearance:button}button{cursor:pointer}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";line-height:1.5}h1,h3,h6,p{margin:0}h1,h3,h6{font-size:inherit;font-weight:inherit}img{border-style:solid;max-width:100%;height:auto}img,svg{display:block;vertical-align:middle}.prose{color:#374151;max-width:65ch;font-size:1rem;line-height:1.75}.prose a{color:#111827;text-decoration:underline;font-weight:500}.prose ol>li{position:relative;padding-left:1.75em}.prose ol>li:before{content:counter(list-item,var(--list-counter-style,decimal)) ".";position:absolute;font-weight:400;color:#6b7280;left:0}.prose h2{color:#111827;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose h3{color:#111827;font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose code{color:#111827;font-weight:600;font-size:.875em}.prose code:before{content:"`"}.prose code:after{content:"`"}.prose pre{color:#e5e7eb;background-color:#1f2937;overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose pre code{background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:400;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose pre code:before{content:none}.prose pre code:after{content:none}.prose p{margin-top:1.25em;margin-bottom:1.25em}.prose ol{margin-top:1.25em;margin-bottom:1.25em;list-style-type:none}.prose li{margin-top:.5em;margin-bottom:.5em}.prose h2+*{margin-top:0}.prose h3+*{margin-top:0}.prose>:first-child{margin-top:0}.prose>:last-child{margin-bottom:0}.bg-white{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-red-800{--tw-bg-opacity:1;background-color:rgba(153,27,27,var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity))}.bg-cover{background-size:cover}.flex{display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex}.grid{display:-ms-grid;display:grid}.hidden{display:none}.flex-col{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}.place-items-center{place-items:center}.items-center{-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;align-items:center}.justify-center{-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center}.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.font-normal{font-weight:400}.font-bold{font-weight:700}.h-screen{height:100vh}.h-0{height:0}.h-14{height:3.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-5xl{font-size:3rem;line-height:1}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-7xl{font-size:4.5rem;line-height:1}.m-auto{margin:auto}.mx-auto{margin-left:auto;margin-right:auto}.mx-16{margin-left:4rem;margin-right:4rem}.mt-32{margin-top:8rem}.mt-20{margin-top:5rem}.mt-22{margin-top:5.5rem}.mt-auto{margin-top:auto}.mb-20{margin-bottom:5rem}.mt-30{margin-top:7.5rem}.mt-8{margin-top:2rem}.mt-24{margin-top:6rem}.max-w-screen-lg{max-width:1024px}.min-h-screen{min-height:100vh}.min-h-\[32rem\]{min-height:32rem}.p-20{padding:5rem}.px-28{padding-left:7rem;padding-right:7rem}.px-\[30vw\]{padding-left:30vw;padding-right:30vw}.py-\[30vh\]{padding-top:30vh;padding-bottom:30vh}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.pt-32{padding-top:8rem}.pb-5{padding-bottom:1.25rem}.pb-10{padding-bottom:2.5rem}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.left-0{left:0}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0/.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);-webkit-box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0/.1),0 4px 6px -4px rgb(0 0 0/.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);-webkit-box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.text-left{text-align:left}.text-center{text-align:center}.text-gray-500{--tw-text-opacity:1;color:rgba(107,114,128,var(--tw-text-opacity))}.text-red-300{--tw-text-opacity:1;color:rgba(252,165,165,var(--tw-text-opacity))}.text-light-300{--tw-text-opacity:1;color:rgba(248,249,250,var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.write-vertical-right{-webkit-writing-mode:vertical-rl;-ms-writing-mode:tb-rl;writing-mode:vertical-rl}.write-orient-upright{-webkit-text-orientation:upright;text-orientation:upright}.w-full{width:100%}.w-14{width:3.5rem}.w-0{width:0}.w-screen{width:100vw}.z-10{z-index:10}.z-50{z-index:50}.gap-10{grid-gap:2.5rem;gap:2.5rem}.gap-3{grid-gap:.75rem;gap:.75rem}.transition-all{-webkit-transition-property:all;-o-transition-property:all;transition-property:all;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);-o-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-duration:.15s;-o-transition-duration:.15s;transition-duration:.15s}.transition-transform{-webkit-transition-property:-webkit-transform;-o-transition-property:transform;transition-property:transform,-webkit-transform;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);-o-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-duration:.15s;-o-transition-duration:.15s;transition-duration:.15s}.duration-300{-webkit-transition-duration:.3s;-o-transition-duration:.3s;transition-duration:.3s}.delay-300{-webkit-transition-delay:.3s;-o-transition-delay:.3s;transition-delay:.3s}@-webkit-keyframes wiggle{0%,to{-webkit-transform:rotate(-1deg);transform:rotate(-1deg)}25%{-webkit-transform:rotate(1deg);transform:rotate(1deg)}50%{-webkit-transform:rotate(-2deg);transform:rotate(-2deg)}75%{-webkit-transform:rotate(1deg);transform:rotate(1deg)}}@media (min-width:640px){.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width:1024px){.lg\:flex{display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex}.lg\:ml-14{margin-left:3.5rem}.lg\:text-right{text-align:right}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}</style><link rel="preload" href="/assets/app.5774e9af.css" as="style"></head><body><div id="app" data-server-rendered="true"><!--[--><div class="fixed z-50 top-0 left-0" data-v-a5920ee6=""><section class="absolute top-0 left-0 w-screen h-screen px-[30vw] py-[30vh] bg-cover text-light-300 transition-all delay-300 duration-300" style="clip-path:polygon(0 0,0 0,0 0,0 0);opacity:0;background-image:url(/assets/menu-bg.b6f595e2.svg)" data-v-a5920ee6=""><h1 class="mb-20 text-5xl" data-v-a5920ee6="">Menu</h1><nav class="grid gap-3 text-xl font-normal" data-v-a5920ee6=""><a href="/" class="" data-v-a5920ee6="">Home</a><a href="/posts/routes" class="" data-v-a5920ee6="">Routes</a><a href="/posts/techs" class="" data-v-a5920ee6="">Techs</a></nav><div class="mt-30" data-v-a5920ee6=""><button data-v-a5920ee6="">한국어</button><span data-v-a5920ee6=""> / </span><button data-v-a5920ee6="">English</button></div></section><section data-v-a5920ee6=""><button class="relative w-14 h-14" data-v-a5920ee6=""><div class="absolute inset-0 grid place-items-center bg-red-800 transition-transform delay-300 duration-300" style="backface-visibility:hidden;transform-style:preserve-3d;transform:rotateY(0)" data-v-a5920ee6=""><svg width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" class="text-xl text-white" data-v-a5920ee6=""><path d="M4 6h24v2H4z" fill="currentColor"></path><path d="M4 24h24v2H4z" fill="currentColor"></path><path d="M4 12h24v2H4z" fill="currentColor"></path><path d="M4 18h24v2H4z" fill="currentColor"></path></svg></div><div class="absolute inset-0 grid place-items-center bg-red-800 transition-transform delay-300 duration-300" style="backface-visibility:hidden;transform-style:preserve-3d;transform:rotateY(-180deg)" data-v-a5920ee6=""><svg width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" class="text-xl text-white" data-v-a5920ee6=""><path d="M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z" fill="currentColor"></path></svg></div></button></section></div><header class="fixed top-0 left-0 z-10 h-screen w-14 pb-10 hidden lg:flex flex-col items-center bg-white text-sm shadow-2xl" data-v-4681b89c=""><div class="mt-22 w-0 h-0" data-v-4681b89c=""><nav class="nav" data-v-4681b89c=""><a href="/posts/techs" class="" data-v-4681b89c="">Techs</a><a href="/posts/routes" class="" data-v-4681b89c="">Routes</a><a href="/" class="" data-v-4681b89c="">Home</a></nav></div><div class="mt-auto grid justify-center" data-v-4681b89c=""><button data-v-4681b89c=""><span class="write-vertical-right" data-v-4681b89c="">한국어</span></button><span class="text-center" data-v-4681b89c="">- </span><button data-v-4681b89c=""><span class="text-red-300 write-vertical-right write-orient-upright" data-v-4681b89c="">en</span></button></div></header><main class="min-h-screen lg:ml-14"><!--[--><!----><div class="p-20" data-v-c4905ff2=""><article class="py-10 max-w-screen-lg bg-gray-50 shadow-lg" data-v-c4905ff2=""><h1 class="mx-16 text-7xl font-bold" data-v-c4905ff2="">Shallow copy and deep copy</h1><img class="mt-8" src="https://images.unsplash.com/flagged/photo-1582733265415-a0740c8a82fd?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1050&amp;q=80" alt="" data-v-c4905ff2=""><div class="mt-24" data-v-c4905ff2=""><!--[--><div class="prose prose m-auto text-left" data-v-c4905ff2-s=""><p data-v-c4905ff2-s=""><span class="photo-reference" data-v-c4905ff2-s="">Photo by <a href="https://unsplash.com/@seimesa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener" data-v-c4905ff2-s="">Mario Mesaglio</a> on <a href="https://unsplash.com/s/photos/recursive?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener" data-v-c4905ff2-s="">Unsplash</a></span></p><h2 data-v-c4905ff2-s="">왜 이러지??</h2><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> test <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> test<span class="token punctuation" data-v-c4905ff2-s="">;</span>

test<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">pop</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 기대한 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [1, 2, 3, 4, 5]</span>
<span class="token comment" data-v-c4905ff2-s="">// 출력되는 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [1, 2, 3, 4]</span>
</code></pre><p data-v-c4905ff2-s="">copied는 건들지 않고 test에만 변형을 가했지만 copied에도 그 영향이 미쳤다. 이걸 설명하기 위해서는 <code data-v-c4905ff2-s="">기본형 타입(Primitive Type)</code>과 <code data-v-c4905ff2-s="">참조형 타입(Reference Type)</code>의 차이와 주소값에 대한 설명이 필요하지만 이건 나중에 따로 다루겠다. 일단은 자바스크립트에서 배열(Array)은 참조형 타입이고, 참조형 타입은 기본형 타입인 문자열(string)이나 숫자(number)등을 복사하듯이 해서는 복사가 제대로 이뤄지지 않는다는 것만 알면 되겠다. 배열 외에도 참조형 타입에는 Object, Function, Date, RegExp, Map, WeakMap, Set, WeakSet 등이 있다.</p><p data-v-c4905ff2-s="">위의 test같은 1차원 배열은 <code data-v-c4905ff2-s="">얕은 복사</code>로 복사할 수 있다. 쉽게 말하면 배열 안에 있는 숫자들은 기본형 타입이니 그 단계로 한 단계 내려가 숫자들을 직접 복사하는 것이다.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> test <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

<span class="token keyword" data-v-c4905ff2-s="">for</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token keyword" data-v-c4905ff2-s="">let</span> i <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">;</span> i <span class="token operator" data-v-c4905ff2-s="">&lt;</span> test<span class="token punctuation" data-v-c4905ff2-s="">.</span>length<span class="token punctuation" data-v-c4905ff2-s="">;</span> i<span class="token operator" data-v-c4905ff2-s="">++</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
  <span class="token keyword" data-v-c4905ff2-s="">const</span> copiedNumber <span class="token operator" data-v-c4905ff2-s="">=</span> test<span class="token punctuation" data-v-c4905ff2-s="">[</span>i<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span> <span class="token comment" data-v-c4905ff2-s="">// 기본형 타입의 복사</span>
  copied<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">push</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copiedNumber<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token punctuation" data-v-c4905ff2-s="">}</span>

test<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">pop</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 기대한 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [1, 2, 3, 4, 5]</span>
<span class="token comment" data-v-c4905ff2-s="">// 출력되는 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [1, 2, 3, 4, 5]</span>
<span class="token comment" data-v-c4905ff2-s="">// 이제 test.pop()의 효과를 copied가 받지 않는다.</span>
</code></pre><p data-v-c4905ff2-s="">얕은 복사에는 많은 방법이 있다. 위에서처럼 for loop를 사용한 것은 기본형 타입이 복사되는 것을 보여주기 위함이었고, 다음과 같은 방법들이 있다.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token operator" data-v-c4905ff2-s="">...</span>test<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// or</span>
<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> test<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">slice</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// or</span>
<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> test<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">map</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token parameter" data-v-c4905ff2-s="">num</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token operator" data-v-c4905ff2-s="">=&gt;</span> num<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// or</span>
<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> test<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">filter</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token operator" data-v-c4905ff2-s="">=&gt;</span> <span class="token boolean" data-v-c4905ff2-s="">true</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 등등...</span>
</code></pre><p data-v-c4905ff2-s="">slice, map, filter등의 메소드는 새로운 배열을 리턴한다는 성질을 이용한 것인데, 사실 복사만 하려고 이 메소드들을 사용하는 일은 드물다. (그나마 slice정도…)</p><p data-v-c4905ff2-s="">그러면 2차원 배열은 어떨까? 아쉽게도 얕은 복사로는 복사가 되지 않는다. 한 단계 아래로 내려가서 복사를 하더라도 그 한 단계 아래에 있는 것이 또 배열이기 때문에 맨 처음에 언급한 문제가 반복된다.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> nested <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">7</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">8</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">9</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

<span class="token keyword" data-v-c4905ff2-s="">for</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token keyword" data-v-c4905ff2-s="">let</span> i <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">;</span> i <span class="token operator" data-v-c4905ff2-s="">&lt;</span> nested<span class="token punctuation" data-v-c4905ff2-s="">.</span>length<span class="token punctuation" data-v-c4905ff2-s="">;</span> i<span class="token operator" data-v-c4905ff2-s="">++</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
  <span class="token keyword" data-v-c4905ff2-s="">const</span> copiedNumber <span class="token operator" data-v-c4905ff2-s="">=</span> nested<span class="token punctuation" data-v-c4905ff2-s="">[</span>i<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
  copied<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">push</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copiedNumber<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token punctuation" data-v-c4905ff2-s="">}</span>

nested<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">pop</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 기대한 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [4, 5, 6],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [7, 8, 9],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
<span class="token comment" data-v-c4905ff2-s="">// 출력되는 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [4, 5, 6],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [7, 8, 9],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
<span class="token comment" data-v-c4905ff2-s="">// 응? 괜찮은거 아닌가? 싶지만...</span>
nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">pop</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 기대한 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [4, 5, 6],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [7, 8, 9],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
<span class="token comment" data-v-c4905ff2-s="">// 출력되는 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [4, 5, 6],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [7, 8],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
<span class="token comment" data-v-c4905ff2-s="">// 가장 안쪽을 건들면 또다시 copied가 영향을 받는다.</span>
</code></pre><p data-v-c4905ff2-s="">해결법은 한 단계 더 들어가서 복사하는 것이다. 다이브를 두 번 해보자.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> nested <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">7</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">8</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">9</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

<span class="token keyword" data-v-c4905ff2-s="">for</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token keyword" data-v-c4905ff2-s="">let</span> i <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">;</span> i <span class="token operator" data-v-c4905ff2-s="">&lt;</span> nested<span class="token punctuation" data-v-c4905ff2-s="">.</span>length<span class="token punctuation" data-v-c4905ff2-s="">;</span> i<span class="token operator" data-v-c4905ff2-s="">++</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
  <span class="token keyword" data-v-c4905ff2-s="">const</span> deep1 <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
  <span class="token keyword" data-v-c4905ff2-s="">for</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token keyword" data-v-c4905ff2-s="">let</span> j <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">;</span> j <span class="token operator" data-v-c4905ff2-s="">&lt;</span> nested<span class="token punctuation" data-v-c4905ff2-s="">[</span>i<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span>length<span class="token punctuation" data-v-c4905ff2-s="">;</span> j<span class="token operator" data-v-c4905ff2-s="">++</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
    <span class="token keyword" data-v-c4905ff2-s="">const</span> copiedNumber <span class="token operator" data-v-c4905ff2-s="">=</span> nested<span class="token punctuation" data-v-c4905ff2-s="">[</span>i<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span>j<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span> <span class="token comment" data-v-c4905ff2-s="">// 기본형 타입의 복사</span>
    deep1<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">push</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copiedNumber<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
  <span class="token punctuation" data-v-c4905ff2-s="">}</span>
  copied<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">push</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>deep1<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token punctuation" data-v-c4905ff2-s="">}</span>

nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">pop</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 기대한 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [4, 5, 6],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [7, 8, 9],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
<span class="token comment" data-v-c4905ff2-s="">// 출력되는 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [4, 5, 6],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [7, 8, 9],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
</code></pre><p data-v-c4905ff2-s="">위에 소개한 방법들을 따르다면 이렇게 되겠다.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token operator" data-v-c4905ff2-s="">...</span>nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token operator" data-v-c4905ff2-s="">...</span>nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token operator" data-v-c4905ff2-s="">...</span>nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// or</span>
<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span>nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">slice</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">slice</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">slice</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// ... 그만하자. 사실 아무도 이렇게 하지 않는다.</span>
<span class="token keyword" data-v-c4905ff2-s="">const</span> nested <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">7</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">8</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">9</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">{</span> <span class="token literal-property property" data-v-c4905ff2-s="">name</span><span class="token operator" data-v-c4905ff2-s="">:</span> <span class="token string" data-v-c4905ff2-s="">'Jon'</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token literal-property property" data-v-c4905ff2-s="">age</span><span class="token operator" data-v-c4905ff2-s="">:</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token literal-property property" data-v-c4905ff2-s="">friends</span><span class="token operator" data-v-c4905ff2-s="">:</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token string" data-v-c4905ff2-s="">'Roberto'</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token string" data-v-c4905ff2-s="">'Dominik'</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token string" data-v-c4905ff2-s="">'Gasai Yuno'</span><span class="token punctuation" data-v-c4905ff2-s="">]</span> <span class="token punctuation" data-v-c4905ff2-s="">}</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">7</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">8</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">9</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 이런건 어떻게 하려고...</span>
</code></pre><p data-v-c4905ff2-s="">이렇게 (기본형 타입이 있는 단계까지) 여러 단계 아래로 내려가 복사해 오는 것을 <code data-v-c4905ff2-s="">깊은 복사</code>라고 한다. 여러 층으로 된 참조형 타입은 깊은 복사를 해야만 제대로 복사가 된다. 그런데 여기서 자주 언급되는 치트방법이 있는데 바로 <code data-v-c4905ff2-s="">JSON.parse()</code>와 <code data-v-c4905ff2-s="">JSON.stringify()</code>를 사용하는 것이다.</p><h2 data-v-c4905ff2-s="">JSON.parse(JSON.stringify())</h2><h3 data-v-c4905ff2-s="">장점</h3><p data-v-c4905ff2-s="">간편하다.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> nested <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">7</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">8</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">9</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
<span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token constant" data-v-c4905ff2-s="">JSON</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">parse</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token constant" data-v-c4905ff2-s="">JSON</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">stringify</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>nested<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">pop</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 기대한 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [4, 5, 6],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [7, 8, 9],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
<span class="token comment" data-v-c4905ff2-s="">// 출력되는 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [4, 5, 6],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [7, 8, 9],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
</code></pre><p data-v-c4905ff2-s="">깊은 복사를 하는 대신에 객체 자체를 JSON문자열로 바꿨다(stringify)가 다시 객체로 해석(parse)하게끔 하는 방법이다. JSON문자열로 바뀌면서 기존에 있던 주소값들은 전혀 상관이 없게 되고, 이걸 해석할 때 완전히 새로운 주소들에 써진 객체가 된다. 어떻게 보면 인간이 하는 사고방식과 가장 유사한 방법이다.</p><h3 data-v-c4905ff2-s="">단점</h3><p data-v-c4905ff2-s="">문제는 장점에 비해 단점이 치명적이라는 것이다.</p><ol data-v-c4905ff2-s=""><li data-v-c4905ff2-s="">데이터의 종류에 따라서는 손실 또는 변형될 수 있다.</li><li data-v-c4905ff2-s="">이 가능성을 에러 메시지나 경고 메시지 등으로 전혀 알려주지 않는다.</li></ol><p data-v-c4905ff2-s="">예시인 nested를 조금 바꿔서 해보자.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> nested <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
  <span class="token literal-property property" data-v-c4905ff2-s="">name</span><span class="token operator" data-v-c4905ff2-s="">:</span> <span class="token keyword" data-v-c4905ff2-s="">undefined</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token function-variable function" data-v-c4905ff2-s="">sayHello</span><span class="token operator" data-v-c4905ff2-s="">:</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token operator" data-v-c4905ff2-s="">=&gt;</span> console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token string" data-v-c4905ff2-s="">'Hello!'</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
<span class="token punctuation" data-v-c4905ff2-s="">}</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token constant" data-v-c4905ff2-s="">JSON</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">parse</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token constant" data-v-c4905ff2-s="">JSON</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">stringify</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>nested<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// 기대한 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// {</span>
<span class="token comment" data-v-c4905ff2-s="">//   name: undefined,</span>
<span class="token comment" data-v-c4905ff2-s="">//   sayHello: () =&gt; console.log("Hello!")</span>
<span class="token comment" data-v-c4905ff2-s="">// };</span>
<span class="token comment" data-v-c4905ff2-s="">// 출력되는 copied의 값</span>
<span class="token comment" data-v-c4905ff2-s="">// {}</span>
</code></pre><p data-v-c4905ff2-s="">아무런 언급도 없이 값들이 그냥 사라져버렸다. 이런 반응을 보이는 데이터 종류에는 위에서 쓴 undefined나 함수, 그리고 Date 객체, Symbol() 등이 있고, NaN이나 Infinity같은 경우에는 null로 바꿔버린다.</p><p data-v-c4905ff2-s="">JSON.parse(JSON.stringify())는 간편하기는 하지만 결코 추천할 수 없는 방법이다.</p><h2 data-v-c4905ff2-s="">깊은 복사(Recursive)</h2><p data-v-c4905ff2-s="">자, 그럼 남은 선택지는 깊은 복사를 하는 것 뿐이다. 10중 배열이건 100중 객체건 기본형 타입이 있는 곳까지 내려가 복사를 해오는 것이다. 하지만 우리가 직접 할 필요는 없다. Javascript에게 일을 시켜보자. 일단 배열일 때만 쓸 수 있는 함수를 만들어 봤다.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> nested <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">7</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">8</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">9</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">7</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">8</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">9</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">4</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">5</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">6</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
  <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">1</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">,</span> <span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">,</span>
<span class="token punctuation" data-v-c4905ff2-s="">]</span>

<span class="token keyword" data-v-c4905ff2-s="">const</span> <span class="token function-variable function" data-v-c4905ff2-s="">deepCopy</span> <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token parameter" data-v-c4905ff2-s="">targetElement</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token operator" data-v-c4905ff2-s="">=&gt;</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
  <span class="token keyword" data-v-c4905ff2-s="">if</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token operator" data-v-c4905ff2-s="">!</span>Array<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">isArray</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>targetElement<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
    <span class="token keyword" data-v-c4905ff2-s="">return</span> targetElement
  <span class="token punctuation" data-v-c4905ff2-s="">}</span>
  <span class="token keyword" data-v-c4905ff2-s="">const</span> returnArray<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">]</span> <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">]</span>

  <span class="token keyword" data-v-c4905ff2-s="">for</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token keyword" data-v-c4905ff2-s="">let</span> i <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">;</span> i <span class="token operator" data-v-c4905ff2-s="">&lt;</span> targetElement<span class="token punctuation" data-v-c4905ff2-s="">.</span>length<span class="token punctuation" data-v-c4905ff2-s="">;</span> i<span class="token operator" data-v-c4905ff2-s="">++</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
    <span class="token keyword" data-v-c4905ff2-s="">const</span> element <span class="token operator" data-v-c4905ff2-s="">=</span> targetElement<span class="token punctuation" data-v-c4905ff2-s="">[</span>i<span class="token punctuation" data-v-c4905ff2-s="">]</span>
    <span class="token keyword" data-v-c4905ff2-s="">const</span> returnElement <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token function" data-v-c4905ff2-s="">deepCopy</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>element<span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token comment" data-v-c4905ff2-s="">// recursive!</span>
    returnArray<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">push</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>returnElement<span class="token punctuation" data-v-c4905ff2-s="">)</span>
  <span class="token punctuation" data-v-c4905ff2-s="">}</span>

  <span class="token keyword" data-v-c4905ff2-s="">return</span> returnArray
<span class="token punctuation" data-v-c4905ff2-s="">}</span>

<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token function" data-v-c4905ff2-s="">deepCopy</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>nested<span class="token punctuation" data-v-c4905ff2-s="">)</span>

nested<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">2</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">3</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">pop</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span>
console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span>
<span class="token comment" data-v-c4905ff2-s="">// 기대한 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3, [4, 5, 6]],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3, [4, 5, 6, [7, 8, 9]]],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3, [4, 5, 6, [7, 8, 9]]],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3, [4, 5, 6]],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
<span class="token comment" data-v-c4905ff2-s="">// 출력되는 값</span>
<span class="token comment" data-v-c4905ff2-s="">// [</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3, [4, 5, 6]],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3, [4, 5, 6, [7, 8, 9]]],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3, [4, 5, 6, [7, 8, 9]]],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3, [4, 5, 6]],</span>
<span class="token comment" data-v-c4905ff2-s="">//   [1, 2, 3],</span>
<span class="token comment" data-v-c4905ff2-s="">// ];</span>
<span class="token comment" data-v-c4905ff2-s="">// nested의 변화에 영향을 받지 않음.</span>
<span class="token comment" data-v-c4905ff2-s="">// 제대로 복사가 됨.</span>
</code></pre><p data-v-c4905ff2-s=""><code data-v-c4905ff2-s="">deepCopy</code>함수에서 재밌는 점은 deepCopy함수 내에서 또다시 deepCopy함수를 쓰고 있다는 것이다. 이런 함수를 <code data-v-c4905ff2-s="">Recursive</code> 함수라고 부르며, 깊은 배열이나 객체 안으로 자바스크립트를 보낼 수 있게 하는 방법이다.</p><p data-v-c4905ff2-s="">쉬운 예시를 들어보자.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> prison <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token string" data-v-c4905ff2-s="">'Matt Damon'</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
</code></pre><p data-v-c4905ff2-s="">언제나 그렇듯이 맷 데이먼이 10중 감옥에 갇혀 구출을 기다리고 있다. 하지만 우리의 자바스크립트는 구출 대신 복사를 해 올 것이다.</p><pre class="language-js" data-v-c4905ff2-s=""><code class="language-js" data-v-c4905ff2-s=""><span class="token keyword" data-v-c4905ff2-s="">const</span> <span class="token function-variable function" data-v-c4905ff2-s="">deepCopy</span> <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token parameter" data-v-c4905ff2-s="">targetElement</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token operator" data-v-c4905ff2-s="">=&gt;</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
  <span class="token keyword" data-v-c4905ff2-s="">if</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token operator" data-v-c4905ff2-s="">!</span>Array<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">isArray</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>targetElement<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
    <span class="token keyword" data-v-c4905ff2-s="">return</span> targetElement
  <span class="token punctuation" data-v-c4905ff2-s="">}</span>
  <span class="token keyword" data-v-c4905ff2-s="">const</span> returnArray<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">]</span> <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token punctuation" data-v-c4905ff2-s="">]</span>

  <span class="token keyword" data-v-c4905ff2-s="">for</span> <span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token keyword" data-v-c4905ff2-s="">let</span> i <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">;</span> i <span class="token operator" data-v-c4905ff2-s="">&lt;</span> targetElement<span class="token punctuation" data-v-c4905ff2-s="">.</span>length<span class="token punctuation" data-v-c4905ff2-s="">;</span> i<span class="token operator" data-v-c4905ff2-s="">++</span><span class="token punctuation" data-v-c4905ff2-s="">)</span> <span class="token punctuation" data-v-c4905ff2-s="">{</span>
    <span class="token keyword" data-v-c4905ff2-s="">const</span> element <span class="token operator" data-v-c4905ff2-s="">=</span> targetElement<span class="token punctuation" data-v-c4905ff2-s="">[</span>i<span class="token punctuation" data-v-c4905ff2-s="">]</span>
    <span class="token keyword" data-v-c4905ff2-s="">const</span> returnElement <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token function" data-v-c4905ff2-s="">deepCopy</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>element<span class="token punctuation" data-v-c4905ff2-s="">)</span>
    returnArray<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">push</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>returnElement<span class="token punctuation" data-v-c4905ff2-s="">)</span>
  <span class="token punctuation" data-v-c4905ff2-s="">}</span>

  <span class="token keyword" data-v-c4905ff2-s="">return</span> returnArray
<span class="token punctuation" data-v-c4905ff2-s="">}</span>

<span class="token keyword" data-v-c4905ff2-s="">const</span> copied <span class="token operator" data-v-c4905ff2-s="">=</span> <span class="token function" data-v-c4905ff2-s="">deepCopy</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>prison<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

prison<span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">[</span><span class="token number" data-v-c4905ff2-s="">0</span><span class="token punctuation" data-v-c4905ff2-s="">]</span><span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">pop</span><span class="token punctuation" data-v-c4905ff2-s="">(</span><span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>

console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>prison<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// [[[[[[[[[[]]]]]]]]]]</span>

console<span class="token punctuation" data-v-c4905ff2-s="">.</span><span class="token function" data-v-c4905ff2-s="">log</span><span class="token punctuation" data-v-c4905ff2-s="">(</span>copied<span class="token punctuation" data-v-c4905ff2-s="">)</span><span class="token punctuation" data-v-c4905ff2-s="">;</span>
<span class="token comment" data-v-c4905ff2-s="">// [[[[[[[[[["Matt Damon"]]]]]]]]]]</span>
<span class="token comment" data-v-c4905ff2-s="">// prison 배열의 변화에 영향을 받지 않음</span>
<span class="token comment" data-v-c4905ff2-s="">// 즉 제대로 복사되어 서로 완전히 다른 배열이 됨</span>
</code></pre><p data-v-c4905ff2-s="">첫 번째 for loop는 10중 감옥과 마주치고 deepCopy함수를 다시 실행한다. 이번엔 9중 감옥과 마주치고 다시 deepCopy함수를 실행한다. 그 다음엔 8중 감옥에 대해 deepCopy함수를 실행한다.<br data-v-c4905ff2-s="">이 과정은 deepCopy함수의 첫 번째 줄인 <code data-v-c4905ff2-s="">if (!Array.isArray(targetElement))</code>에 "Matt Damon"문자열이 걸려 <code data-v-c4905ff2-s="">return targetElement</code>가 실행될 때까지 반복된다. 그 동안 상위의 for loop는 모두 각자의 deepCopy함수가 값을 출력하기를 멈춰서서 기다리고 있다.<br data-v-c4905ff2-s="">"Matt Damon"에 다다르면 이제 가장 나중에 실행된 deepCopy함수부터 <code data-v-c4905ff2-s="">return returnArray</code>을 하기 시작한다(=멈춰서 있던 for loop가 하나씩 loop를 끝낸다). 이 과정을 거쳐서 최종적으로 10중 감옥에 갇힌 Matt Damon이 복사됐다.</p><h2 data-v-c4905ff2-s="">결론</h2><p data-v-c4905ff2-s=""><code data-v-c4905ff2-s="">JSON.parse(JSON.stringify())</code>는 간편해 보이지만 바람직한 방법은 아니다. Recursive 함수로 깊은 복사를 하는 함수를 만드는 것은 크게 어렵지 않다. 그리고 구글로 검색하면 많은 함수들이 올라와 있어 구하기도 쉬우며, 확실하고 쉬운 방법을 원한다면 <code data-v-c4905ff2-s="">Lodash</code>라는 라이브러리를 사용하는 방법도 있다고 하니(써보진 않았다) JSON.parse(JSON.stringify())의 사용은 자제하도록 하자.</p></div><!--]--></div></article></div><!----><!----><!--]--></main><footer class="min-h-[32rem] mt-32 pt-32 pb-5 px-28 flex flex-col justify-between bg-transparent" data-v-7ba004c0=""><div class="w-full max-w-screen-lg mx-auto grid sm:grid-cols-2 lg:grid-cols-3 gap-10" data-v-7ba004c0=""><div data-v-7ba004c0=""><h6 data-v-7ba004c0=""><svg width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" class="icon" data-v-7ba004c0=""><path d="M27.562 26L17.17 8.928l2.366-3.888L17.828 4L16 7.005L14.17 4l-1.708 1.04l2.366 3.888L4.438 26H2v2h28v-2zM16 10.85L25.22 26H17v-8h-2v8H6.78z" fill="currentColor"></path></svg></h6><nav class="nav" data-v-7ba004c0=""><!--[--><a href="/posts/routes/2018-05-19T2018-05-28" class="recent-post-link" data-v-7ba004c0="">The Mongolian Wind</a><a href="/posts/routes/2018-05-13T2018-05-18" class="recent-post-link" data-v-7ba004c0="">Good bye, China</a><a href="/posts/routes/2018-05-06T2018-05-12" class="recent-post-link" data-v-7ba004c0="">Happy and Unhappy</a><a href="/posts/routes/2018-05-03T2018-05-05" class="recent-post-link" data-v-7ba004c0="">The First Day of the Bike Trip</a><!--]--></nav></div><div data-v-7ba004c0=""><h6 data-v-7ba004c0=""><svg width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" class="icon" data-v-7ba004c0=""><path d="M31 16l-7 7l-1.41-1.41L28.17 16l-5.58-5.59L24 9l7 7z" fill="currentColor"></path><path d="M1 16l7-7l1.41 1.41L3.83 16l5.58 5.59L8 23l-7-7z" fill="currentColor"></path><path d="M12.419 25.484L17.639 6l1.932.518L14.35 26z" fill="currentColor"></path></svg></h6><nav class="nav" data-v-7ba004c0=""><!--[--><a href="/posts/techs/closure" class="recent-post-link" data-v-7ba004c0="">Closure</a><a href="/posts/techs/event-listerners" class="recent-post-link" data-v-7ba004c0="">Event Listener</a><a href="/posts/techs/big-o-notation" class="recent-post-link" data-v-7ba004c0="">Big O Notation</a><a href="/posts/techs/baby-postgres" class="recent-post-link" data-v-7ba004c0="">My simple and small PostgreSQL commands</a><a aria-current="page" href="/posts/techs/deep-copy" class="router-link-active router-link-exact-active recent-post-link" data-v-7ba004c0="">Shallow copy and deep copy</a><!--]--></nav></div><div class="lg:text-right" data-v-7ba004c0=""><h6 data-v-7ba004c0=""><svg width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" class="icon" data-v-7ba004c0=""><path d="M29.25 6.76a6 6 0 0 0-8.5 0l1.42 1.42a4 4 0 1 1 5.67 5.67l-8 8a4 4 0 1 1-5.67-5.66l1.41-1.42l-1.41-1.42l-1.42 1.42a6 6 0 0 0 0 8.5A6 6 0 0 0 17 25a6 6 0 0 0 4.27-1.76l8-8a6 6 0 0 0-.02-8.48z" fill="currentColor"></path><path d="M4.19 24.82a4 4 0 0 1 0-5.67l8-8a4 4 0 0 1 5.67 0A3.94 3.94 0 0 1 19 14a4 4 0 0 1-1.17 2.85L15.71 19l1.42 1.42l2.12-2.12a6 6 0 0 0-8.51-8.51l-8 8a6 6 0 0 0 0 8.51A6 6 0 0 0 7 28a6.07 6.07 0 0 0 4.28-1.76l-1.42-1.42a4 4 0 0 1-5.67 0z" fill="currentColor"></path></svg></h6><nav class="nav" data-v-7ba004c0=""><a class="recent-post-link" href="https://github.com/jonganebski" target="_blank" rel="noopener noreferrer" data-v-7ba004c0="">Github</a><a class="recent-post-link" href="https://jinseokbang.com" target="_blank" rel="noopener noreferrer" data-v-7ba004c0="">Portfolio</a></nav></div></div><div class="mt-20 text-center text-sm text-gray-500" data-v-7ba004c0=""><p data-v-7ba004c0="">Built with Vue</p><p data-v-7ba004c0="">2022 © Jon Ganebski</p></div></footer><!--]--></div><link rel="stylesheet" href="/assets/app.5774e9af.css"></body></html>