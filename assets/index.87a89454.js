var oe=Object.defineProperty,re=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var I=(o,t,l)=>t in o?oe(o,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[t]=l,ee=(o,t)=>{for(var l in t||(t={}))ie.call(t,l)&&I(o,l,t[l]);if(J)for(var l of J(t))ce.call(t,l)&&I(o,l,t[l]);return o},te=(o,t)=>re(o,ue(t));import{_ as ae,u as B,s as P,e as _e,f as de,g as se,d as ne,r as pe,a as me}from"./app.54392c9e.js";import{d as Z,h as _,j as p,m as r,v as g,s as F,y as U,t as e,S as W,N as he,p as L,w as C,F as M,U as H,r as R,$ as ve,a0 as fe,al as ge,o as ye,ad as $e,am as be,Q as ke,R as G,x as K,L as xe,q as we,an as Ce,n as j}from"./vendor.6bd645fd.js";import{_ as ze,b as Se,a as Ne}from"./list-numbered.75736eed.js";const Ee={class:"mt-4 px-2 text-center"},Ue={key:0,class:"text-sm text-gray-700 dark:text-gray-300"},Re=W(" Photo by "),Te=["href"],Ve={key:1,class:"text-sm text-gray-700 dark:text-gray-300"},je=W(" on "),Fe=["href"],Le={class:"text-xs text-gray-500"},Me=Z({props:{selectedImage:null},setup(o){const t=o,{t:l}=B();return(s,m)=>{var h,v,c,b,f,y,$,k,w,u;return _(),p("div",Ee,[((h=t.selectedImage)==null?void 0:h.creator)?(_(),p("span",Ue,[Re,r("a",{class:F([((v=t.selectedImage)==null?void 0:v.creator.url)?"link__active":"link__inactive"]),href:(c=t.selectedImage)==null?void 0:c.creator.url,target:"_blank",rel:"noopener"},g((f=(b=t.selectedImage)==null?void 0:b.creator)==null?void 0:f.name),11,Te)])):U("",!0),((y=t.selectedImage)==null?void 0:y.provider)?(_(),p("span",Ve,[je,r("a",{class:F([(($=t.selectedImage)==null?void 0:$.provider.url)?"link__active":"link__inactive"]),href:(k=t.selectedImage)==null?void 0:k.provider.url,target:"_blank",rel:"noopener"},g((u=(w=t.selectedImage)==null?void 0:w.provider)==null?void 0:u.name),11,Fe)])):U("",!0),r("p",Le,g(e(l)("all_rights_of_the_image_belong_to_the_creator")),1)])}}});var Be=ae(Me,[["__scopeId","data-v-176f9680"]]);const Ze={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},De=r("circle",{cx:"9.5",cy:"9.5",r:"2.5",fill:"currentColor"},null,-1),He=r("circle",{cx:"9.5",cy:"22.5",r:"2.5",fill:"currentColor"},null,-1),Oe=r("circle",{cx:"22.5",cy:"22.5",r:"2.5",fill:"currentColor"},null,-1),Ye=r("path",{d:"M28 2H4a2.002 2.002 0 0 0-2 2v24a2.002 2.002 0 0 0 2 2h24a2.002 2.002 0 0 0 2-2V4a2.002 2.002 0 0 0-2-2zm0 13H17V4h11zM15 4v11H4V4zM4 17h11v11H4zm13 11V17h11v11z",fill:"currentColor"},null,-1),Ae=[De,He,Oe,Ye];function Pe(o,t){return _(),p("svg",Ze,Ae)}var Qe={name:"carbon-scatter-matrix",render:Pe};const Xe=1e3*60*60;function qe(){return he("sliding-puzzle-records",async()=>(await P.from("sliding-puzzle-records").select("*, user: user_id (user_name, avatar_url)").order("score",{ascending:!0}).limit(100)).data,{refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:Xe,retry:!1})}const Ge={class:"mt-30 p-4 mx-auto max-w-xl rounded shadow-lg"},Ke={class:"mx-auto w-full text-sm table-fixed"},We={class:"pb-5"},Je={class:"pb-5 w-[80%]"},Ie={class:"pb-5"},et={class:"w-full"},tt={key:0},st=r("td",{colspan:"3",class:"py-10 text-center"},"Loading...",-1),at=[st],nt={key:1},lt=r("td",{colspan:"3",class:"py-10 text-center"},"No Data",-1),ot=[lt],rt={class:"py-2"},ut={class:"py-2 px-4"},it={class:"w-full flex items-center justify-start gap-3"},ct={class:"relative"},_t={class:"absolute top-0 right-0 text-xl pointer-events-none"},dt={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},pt={class:"py-2 text-right"},mt=Z({setup(o){const{t}=B(),{isLoading:l,data:s}=qe(),m=L(h);function h(){var c;const v=[];if(!s.value)return v;for(let b=0;b<((c=s.value)==null?void 0:c.length);b++){const{score:f}=s.value[b];if(v.length===0){v.push(f);continue}if(v[v.length-1]!==f&&(v.push(f),v.length===3))break}return v}return(v,c)=>{const b=ze,f=_e,y=Qe,$=de;return _(),p("div",Ge,[r("table",Ke,[r("thead",null,[r("tr",null,[r("th",We,[C(b)]),r("th",Je,[C(f,{class:"mx-auto"})]),r("th",Ie,[C(y,{class:"ml-auto"})])])]),r("tbody",et,[e(l)?(_(),p("tr",tt,at)):!e(s)||e(s).length===0?(_(),p("tr",nt,ot)):(_(!0),p(M,{key:2},H(e(s),(k,w)=>(_(),p("tr",{key:k.id,class:"w-full"},[r("td",rt,g(w+1),1),r("td",ut,[r("div",it,[r("div",ct,[C($,{src:k.user.avatar_url,width:40,height:40,alt:e(t)("the_avatar_of",{user_name:k.user.user_name})},null,8,["src","alt"]),r("span",_t,g(k.score===e(m)[0]?"\u{1F947}":k.score===e(m)[1]?"\u{1F948}":k.score===e(m)[2]?"\u{1F949}":""),1)]),r("span",dt,g(k.user.user_name),1)])]),r("td",pt,g(k.score),1)]))),128))])])])}}}),ht={class:"text-sm"},vt={key:0,class:""},ft={key:0},gt={key:1},yt={key:2},$t={key:1},bt=Z({props:{clicksCount:null,shuffleCount:null,score:null,time:null},setup(o){const t=o,{t:l}=B(),s=L(()=>{if(!t.time)return null;const m=Math.floor(t.time/(1e3*60)),h=Math.floor((t.time-m*1e3*60)/1e3),v=t.time-m*1e3*60-h*1e3;return{minutes:m,seconds:h,milliseconds:v}});return(m,h)=>(_(),p("div",ht,[r("span",null,[W(g(e(l)("move",2))+": ",1),r("span",{class:F([t.clicksCount<=t.shuffleCount?"text-green-500":t.clicksCount<t.shuffleCount*2?"text-yellow-500":"text-red-500"])},g(t.clicksCount),3)]),e(s)?(_(),p("p",vt,[r("span",null,g(e(l)("time"))+": ",1),e(s).minutes?(_(),p("span",ft,g(e(s).minutes)+" "+g(e(l)("minutes").toLowerCase())+" "+g(" "),1)):U("",!0),e(s).seconds?(_(),p("span",gt,g(e(s).seconds)+" "+g(e(l)("seconds").toLowerCase())+" "+g(" "),1)):U("",!0),e(s).milliseconds?(_(),p("span",yt,g(e(s).milliseconds)+" "+g(e(l)("milliseconds").toLowerCase()),1)):U("",!0)])):U("",!0),o.score?(_(),p("p",$t,g(e(l)("score"))+": "+g(o.score),1)):U("",!0)]))}}),N="https://ijivzwfsihdcvwrntdpe.supabase.co/storage/v1/object/public/sliding-puzzle-images",E="utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText";function kt(){const{t:o}=B(),t=R(!1),l=R(0),s=L(()=>t.value?[{categoryName:o("fate_series"),options:[{label:o("jean_alter"),url:`${N}/jean-alter.jpg`},{label:o("rider_5th"),url:`${N}/rider-5th.jpg`}]},{categoryName:o("eighty_six"),options:[{label:o("vladilena_milize"),url:`${N}/vladilena-milize.jpg`}]},{categoryName:o("attack_on_titan"),options:[{label:o("eren_yeager"),url:`${N}/eren-yeager.jpg`}]}]:[{categoryName:o("nature"),options:[{label:"Kamran Ch",url:`${N}/mountain.jpg`,provider:{name:"Unsplash",url:`https://unsplash.com/t/act-for-nature?${E}`},creator:{name:"Kamran Ch",url:`https://unsplash.com/@kamranch?${E}`}},{label:"David Scanlon",url:`${N}/gorilla.jpg`,provider:{name:"Unsplash",url:`https://unsplash.com/t/nature?${E}`},creator:{name:"David Scanlon",url:`https://unsplash.com/@dsartwork?${E}`}}]},{categoryName:o("cat",2),options:[{label:"Pacto Visual",url:`${N}/cat_pacto-visual.jpg`,provider:{name:"Unsplash",url:`https://unsplash.com/s/photos/cat?${E}`},creator:{name:"Pacto Visual",url:`https://unsplash.com/@pactovisual?${E}`}},{label:"Georgi Benev",url:`${N}/cat_georgi-benev.jpg`,provider:{name:"Unsplash",url:`https://unsplash.com/s/photos/cat-box?${E}`},creator:{name:"georgi benev",url:`https://unsplash.com/@georgibenev97?${E}`}}]}]),m=R(h());function h(){const f=se(0,s.value.length-1),y=se(0,s.value[f].options.length-1);return s.value[f].options[y].url}let v;function c(){l.value+=1,clearTimeout(v),v=setTimeout(()=>l.value=0,200),l.value===10&&(t.value=!t.value,m.value=h())}function b(f){for(let y=0;y<s.value.length;y++)for(let $=0;$<s.value[y].options.length;$++)if(s.value[y].options[$].url===f)return s.value[y].options[$]}return{selectedImageUrl:m,images:s,findImageByUrl:b,worship:c}}function xt(){const o=fe(),{data:t}=ne();return ve(async({score:l})=>{if(!t.value)return null;const{data:s}=await P.from("sliding-puzzle-records").select("*").eq("user_id",t.value.id).order("score",{ascending:!0});if(!s)return null;switch(s.length<=10){case!0:return(await P.from("sliding-puzzle-records").insert({score:l,user_id:t.value.id}).single()).data;case!1:{const m=s[s.length-1];return m.score<l?null:(await P.from("sliding-puzzle-records").update({id:m.id,score:l}).single()).data}}},{onSuccess:l=>{if(!t.value)return;const{user_name:s=t.value.email,avatar_url:m=""}=t.value.user_metadata;if(!l)return;const h=o.getQueryData("sliding-puzzle-records");!h||o.setQueryData("sliding-puzzle-records",()=>(h.push(te(ee({},l),{user:{user_name:s,avatar_url:m}})),h.sort((v,c)=>v.score-c.score)))}})}function wt(){const s=R("shuffle"),m=ge(be),h=m.greater("sm"),v=m.greater("lg"),c=L(()=>v.value?140:h.value?100:60),b=xt(),f=R(0),y=R(null),$=R(null),k=L(()=>!y.value||!$.value?null:$.value-y.value),w=L(()=>k.value?f.value+Math.floor(k.value/1e3):null),u=R([[0,0,0,0,0,0,0],[0,1,2,3,4,5,0],[0,6,7,8,9,10,0],[0,11,12,13,14,15,0],[0,16,17,18,19,20,0],[0,21,22,23,24,25,0],[0,0,0,0,0,-1,0],[0,0,0,0,0,0,0]]);ye(async()=>O());function z(i,a,n){let d=[];const x=u.value[i-1][a],V=u.value[i+1][a],S=u.value[i][a+1],q=u.value[i][a-1];return 0<x&&x!==n&&d.push(x),0<V&&V!==n&&d.push(V),0<S&&S!==n&&d.push(S),0<q&&q!==n&&d.push(q),n&&(d=d.filter(le=>le!==25)),pe(1,d)[0]}async function O(){y.value=null,$.value=null,u.value=[[0,0,0,0,0,0,0],[0,1,2,3,4,5,0],[0,6,7,8,9,10,0],[0,11,12,13,14,15,0],[0,16,17,18,19,20,0],[0,21,22,23,24,25,0],[0,0,0,0,0,-1,0],[0,0,0,0,0,0,0]],await $e(),f.value=0,s.value="shuffle";let i;for(let a=0;a<50;a++){const n=document.getElementById("void");if(!n)return;const d=Number(n.dataset.rowidx),x=Number(n.dataset.colidx),V=z(d,x,i),S=document.getElementById(V.toString());if(!S)return;await A(S,Number(S.dataset.rowidx),Number(S.dataset.colidx),!1),i=V}s.value="ready"}function Y(){let a=0;for(let n=0;n<u.value.length;n++)for(let d=0;d<u.value[n].length;d++){const x=u.value[n][d];if(x!==0){if(a===25&&x===-1)return!0;if(a+1!==x)return!1;a++}}return!0}async function A(i,a,n,d=!0){const x=T(a,n);return d&&(i.style.transition="transform linear 0.1s"),x==="top"&&(d&&(i.style.transform=`translateY(-${c.value}px)`,await D(100)),[u.value[a][n],u.value[a-1][n]]=[u.value[a-1][n],u.value[a][n]]),x==="bottom"&&(d&&(i.style.transform=`translateY(${c.value}px)`,await D(100)),[u.value[a][n],u.value[a+1][n]]=[u.value[a+1][n],u.value[a][n]]),x==="right"&&(d&&(i.style.transform=`translateX(${c.value}px)`,await D(100)),[u.value[a][n],u.value[a][n+1]]=[u.value[a][n+1],u.value[a][n]]),x==="left"&&(d&&(i.style.transform=`translateX(-${c.value}px)`,await D(100)),[u.value[a][n],u.value[a][n-1]]=[u.value[a][n-1],u.value[a][n]]),d&&(i.style.transition=""),!!x}async function D(i){await new Promise(a=>setTimeout(()=>a(!0),i))}function T(i,a){return u.value[i-1][a]===-1?"top":u.value[i+1][a]===-1?"bottom":u.value[i][a+1]===-1?"right":u.value[i][a-1]===-1?"left":null}async function Q(i,a,n){if(s.value==="shuffle"||s.value==="done")return;const d=i.currentTarget;!d||!await A(d,a,n)||(y.value||(y.value=new Date().getTime()),f.value+=1,s.value==="ready"&&(s.value="playing"),!!Y()&&(s.value="done",$.value=new Date().getTime(),!!w.value&&(console.log(w.value),b.mutate({score:w.value}))))}function X(i){const a=(i-1)%5*c.value*-1,n=Math.floor((i-1)/5)*c.value*-1;return`${a}px ${n}px`}return{SHUFFLE_COUNT:50,nodeSize:c,SIZE_X:5,SIZE_Y:5,clicksCount:f,status:s,nodes:u,score:w,time:k,computeBgPosition:X,onClickNode:Q,initialize:O}}const Ct={class:"mt-2 text-sm"},zt={class:"pl-2 font-bold"},St={display:"mt-1 grid"},Nt=Z({props:{categoryName:null},setup(o){const t=o;return(l,s)=>(_(),p("div",Ct,[r("span",zt,g(t.categoryName),1),r("div",St,[ke(l.$slots,"default")])]))}}),Et=Z({props:{modelValue:null,images:null},emits:["update:modelValue"],setup(o,{emit:t}){const l=o,{t:s}=B();return(m,h)=>{const v=Se,c=Nt,b=Ne;return _(),G(b,{"model-value":l.modelValue,label:e(s)("image"),class:"w-72","onUpdate:modelValue":h[0]||(h[0]=f=>t("update:modelValue",f.toString()))},{default:K(()=>[(_(!0),p(M,null,H(l.images,({categoryName:f,options:y})=>(_(),G(c,{key:f,"category-name":f},{default:K(()=>[(_(!0),p(M,null,H(y,$=>(_(),G(v,{key:$.url,value:$.url,label:$.label},null,8,["value","label"]))),128))]),_:2},1032,["category-name"]))),128))]),_:1},8,["model-value","label"])}}});const Ut={class:"my-4 grid gap-12 place-items-center"},Rt={key:0,class:"w-0 h-0"},Tt=["data-rowIdx","data-colIdx"],Vt=["id","data-rowIdx","data-colIdx","onClick"],jt={class:"absolute inset-0 bg-black bg-opacity-50 grid place-items-center"},Ft={key:0,class:"mt-2 text-center text-rose-500 text-sm"},Lt=Z({setup(o){const{data:t}=ne(),{t:l}=B(),{SHUFFLE_COUNT:s,SIZE_X:m,SIZE_Y:h,clicksCount:v,nodeSize:c,status:b,nodes:f,score:y,time:$,computeBgPosition:k,onClickNode:w,initialize:u}=wt(),{selectedImageUrl:z,findImageByUrl:O,worship:Y,images:A}=kt();return xe(()=>z.value,()=>u()),(D,T)=>{const Q=we("client-only"),X=me;return _(),p(M,null,[r("div",Ut,[r("h1",{class:"text-3xl md:text-5xl",onClick:T[0]||(T[0]=(...i)=>e(Y)&&e(Y)(...i))},g(e(l)("sliding_puzzle")),1),C(Et,{modelValue:e(z),"onUpdate:modelValue":T[1]||(T[1]=i=>Ce(z)?z.value=i:null),images:e(A)},null,8,["modelValue","images"]),C(bt,{class:"min-h-20","shuffle-count":e(s),"clicks-count":e(v),time:e($),score:e(y)},null,8,["shuffle-count","clicks-count","time","score"])]),C(Q,null,{default:K(()=>[r("div",{class:"relative grid gap-px transition-all duration-1000 ease-linear",style:j({gridTemplateRows:`auto repeat(${e(h)}, ${e(c)}px) auto`})},[r("div",{class:F(["absolute top-0 left-1/2 transform -translate-x-1/2 z-1 pointer-events-none",[e(b)==="done"?"shadow-2xl":"shadow"]]),style:j({width:`${e(m)*e(c)+e(m)}px`,height:`${e(h)*e(c)+e(h)}px`})},[r("div",{class:F(["absolute top-0 left-0 z-1 w-full h-full bg-white opacity-0",{"done__anim-mask":e(b)==="done"}])},null,2),r("div",{class:F(["w-full h-full bg-cover",[e(b)==="done"?"done__anim-image opacity-100":"opacity-0"]]),style:j({backgroundImage:`url(${e(z)})`})},null,6)],6),(_(!0),p(M,null,H(e(f),(i,a)=>(_(),p("div",{key:a,class:"grid gap-px transition-all duration-1000 ease-linear",style:j({gridTemplateColumns:`auto repeat(${e(m)}, ${e(c)}px) auto`})},[(_(!0),p(M,null,H(i,(n,d)=>(_(),p("div",{key:n},[n===0?(_(),p("div",Rt)):n===-1?(_(),p("div",{key:1,id:"void","data-rowIdx":a,"data-colIdx":d,style:j({width:`${e(c)}px`,height:`${e(c)}px`})},null,12,Tt)):(_(),p("button",{key:2,id:n.toString(),"data-rowIdx":a,"data-colIdx":d,class:"text-white",style:j({width:`${e(c)}px`,height:`${e(c)}px`,backgroundImage:`url(${e(z)})`,backgroundSize:`${e(c)*e(m)}px ${e(c)*e(h)}px`,backgroundPosition:e(k)(n),transform:"translate(0px)"}),onClick:x=>e(w)(x,a,d)},[r("div",jt,g(e(b)==="done"?"":n),1)],12,Vt))]))),128))],4))),128))],4)]),_:1}),e(t)?U("",!0):(_(),p("div",Ft,g(e(l)("games_auth_warning")),1)),C(Be,{"selected-image":e(O)(e(z))},null,8,["selected-image"]),C(mt),C(X)],64)}}});var Ht=ae(Lt,[["__scopeId","data-v-59b6d1c5"]]);export{Ht as default};
