var de=Object.defineProperty,he=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var te=(a,t,l)=>t in a?de(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,se=(a,t)=>{for(var l in t||(t={}))me.call(t,l)&&te(a,l,t[l]);if(ee)for(var l of ee(t))fe.call(t,l)&&te(a,l,t[l]);return a},oe=(a,t)=>he(a,ve(t));import{h as u,j as d,m as i,d as J,r as M,a4 as _e,s as H,w as ne,a5 as pe,a6 as ge,Q as we,a7 as xe,v as y,t as f,N as Ne,a8 as Me,a9 as be,p as X,L as Ce,o as ke,x as ye,F as Q,U as B,n as $e,aa as L,R as q,y as R}from"./vendor.891d8343.js";import{s as Fe,_ as Se,u as Oe}from"./app.7b8b40c5.js";const Ve={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Ae=i("path",{d:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm0 26a12 12 0 1 1 12-12a12 12 0 0 1-12 12z",fill:"currentColor"},null,-1),Ee=i("circle",{cx:"16",cy:"23.5",r:"1.5",fill:"currentColor"},null,-1),ze=i("path",{d:"M17 8h-1.5a4.49 4.49 0 0 0-4.5 4.5v.5h2v-.5a2.5 2.5 0 0 1 2.5-2.5H17a2.5 2.5 0 0 1 0 5h-2v4.5h2V17a4.5 4.5 0 0 0 0-9z",fill:"currentColor"},null,-1),De=[Ae,Ee,ze];function Qe(a,t){return u(),d("svg",Ve,De)}var Be={name:"carbon-help",render:Qe};const Le={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Re=i("path",{d:"M6 30H4V2h24l-5.8 9l5.8 9H6zm0-12h18.33l-4.53-7l4.53-7H6z",fill:"currentColor"},null,-1),He=[Re];function Ie(a,t){return u(),d("svg",Le,He)}var je={name:"carbon-flag",render:Ie};const Te={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},Ge=i("path",{d:"M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z",fill:"currentColor"},null,-1),Ye=[Ge];function Pe(a,t){return u(),d("svg",Te,Ye)}var Ue={name:"carbon-chevron-down",render:Pe};const We={class:"relative group"},Xe=i("input",{type:"text",class:"px-2 py-1 outline-none bg-gray-200 rounded transition-all transform group-hover:bg-white cursor-pointer group-hover:-translate-y-1"},null,-1),qe={class:"absolute top-0 right-0 pr-1 h-full flex items-center text-xs pointer-events-none transition-transform transform group-hover:-translate-y-1"},Je={class:"absolute grid w-full"},Ke=J({setup(a){const t=M(!1);function l(){t.value=!0}function b(){t.value=!1}function h(){t.value=!t.value}function v(p){console.log(p)}return _e("onClickOption",v),(p,I)=>{const j=Ue;return u(),d("div",We,[i("label",{class:"block rounded cursor-pointer transition-all transform group-hover:shadow",onMousedown:h,onFocusin:l,onFocusout:b},[Xe,i("span",{class:H(["absolute top-0 left-0 z-10 px-2 py-1 h-full flex items-center text-sm transition-transform transform",[t.value?"-translate-y-6 -translate-x-2":"text-gray-500 group-hover:-translate-y-1"]])}," Placeholder & label ",2),i("div",qe,[ne(j,{class:H(["transition-transform transform",{"rotate-180":t.value}])},null,8,["class"])])],32),pe(i("div",Je,[we(p.$slots,"default")],512),[[ge,t.value]])])}}}),Ze={class:"w-full flex transition-all transform hover:translate-x-1 hover:text-blue-700"},et=J({props:{value:null,label:null},setup(a){const t=a,l=xe("onClickOption");return(b,h)=>(u(),d("button",{onMousedown:h[0]||(h[0]=v=>f(l)&&f(l)(t.value))},[i("span",Ze,y(t.label),1)],32))}}),tt=1e3*60*60*24;function st(a){const t=Ne([a],async()=>(await Fe.from(a).select("id, mode")).data,{refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:tt,retry:!1});function l(b){var h,v;return(v=(h=t.data.value)==null?void 0:h.find(p=>p.id===b))==null?void 0:v.mode}return oe(se({},t),{findModeById:l})}const ot={class:"min-h-screen"},nt={class:"mt-10 flex justify-center"},it=["value"],lt=["value"],at={class:"p-2 grid grid-cols-3 intaglio"},rt={class:"flex"},ut={class:"counter"},ct={class:"flex items-center justify-center"},dt=["data-isGameOver"],ht={class:"flex justify-end"},vt={class:"counter"},mt={class:"rows-container intaglio"},ft=["data-isExploded","onContextmenu","onDblclick","onClick"],_t={key:1},pt=J({setup(a){Me(o=>({e9497f66:f(_).rows,f816fbee:W.shadow,e9572532:f(_).cols,"54963292":W.surfaceLight}));class t{constructor(e){this.isExploded=!1,this.isQuestion=!1,this.isFlagged=!1,this.isVeiled=!0,this.isMine=!1,this.hint=0,this.rowNum=e.rowNum,this.colNum=e.colNum}increaseHint(){this.hint+=1}around(e){var n,m,g,w,c,x,r,N,$,F,S,O,V,A,E,z;(m=(n=s.value[this.rowNum-1])==null?void 0:n[this.colNum])==null||m[e](),(w=(g=s.value[this.rowNum-1])==null?void 0:g[this.colNum+1])==null||w[e](),(x=(c=s.value[this.rowNum])==null?void 0:c[this.colNum+1])==null||x[e](),(N=(r=s.value[this.rowNum+1])==null?void 0:r[this.colNum+1])==null||N[e](),(F=($=s.value[this.rowNum+1])==null?void 0:$[this.colNum])==null||F[e](),(O=(S=s.value[this.rowNum+1])==null?void 0:S[this.colNum-1])==null||O[e](),(A=(V=s.value[this.rowNum])==null?void 0:V[this.colNum-1])==null||A[e](),(z=(E=s.value[this.rowNum-1])==null?void 0:E[this.colNum-1])==null||z[e]()}countAround(e){var m,g,w,c,x,r,N,$,F,S,O,V,A,E,z,Z;let n=0;return((g=(m=s.value[this.rowNum-1])==null?void 0:m[this.colNum])==null?void 0:g[e])&&n++,((c=(w=s.value[this.rowNum-1])==null?void 0:w[this.colNum+1])==null?void 0:c[e])&&n++,((r=(x=s.value[this.rowNum])==null?void 0:x[this.colNum+1])==null?void 0:r[e])&&n++,(($=(N=s.value[this.rowNum+1])==null?void 0:N[this.colNum+1])==null?void 0:$[e])&&n++,((S=(F=s.value[this.rowNum+1])==null?void 0:F[this.colNum])==null?void 0:S[e])&&n++,((V=(O=s.value[this.rowNum+1])==null?void 0:O[this.colNum-1])==null?void 0:V[e])&&n++,((E=(A=s.value[this.rowNum])==null?void 0:A[this.colNum-1])==null?void 0:E[e])&&n++,((Z=(z=s.value[this.rowNum-1])==null?void 0:z[this.colNum-1])==null?void 0:Z[e])&&n++,n}unveil(){if(!!this.isVeiled&&!this.isFlagged){if(this.isMine){P({isSuccess:!1});return}this.isVeiled=!1,this.hint===0&&this.around("unveil")}}onLeftClick(){this.isFlagged||this.isQuestion||this.unveil()}onDoubleClick(){this.isVeiled||this.countAround("isFlagged")!==this.hint||this.around("unveil")}onRightClick(){if(!!this.isVeiled){if(this.isFlagged){k.value-=1,this.isFlagged=!1,this.isQuestion=!0;return}if(this.isQuestion){k.value-=1,this.isFlagged=!1,this.isQuestion=!1;return}k.value+=1,this.isFlagged=!0,this.isQuestion=!1}}}const{data:l,findModeById:b}=st("mine-sweeper-modes"),{t:h}=Oe(),v=M(null),{timestamp:p,pause:I,resume:j}=be({immediate:!1,controls:!0}),T=X(()=>v.value?p.value-v.value:0),ie=1e3*999;Ce(T,()=>{T.value<ie||P({isSuccess:!1})});const C=M(!1),D=M(!1),G=M(1),K=X(()=>b(G.value)),s=M([]),k=M(0),_=X(()=>K.value==="expert"?{totalMines:99,rows:16,cols:30}:K.value==="intermediate"?{totalMines:40,rows:16,cols:16}:{totalMines:10,rows:9,cols:9});function Y(o){C.value||(v.value||le(),o(),_.value.totalMines===k.value&&re()&&P({isSuccess:!0}))}function le(){v.value=new Date().getTime(),j()}function P(o){I(),C.value=!0,D.value=o.isSuccess,o.isSuccess||ae()}function ae(){s.value.forEach(o=>{o.forEach(e=>{e.isFlagged||!e.isMine||(e.isExploded=!0)})})}function re(){for(let o=0;o<s.value.length;o++)for(let e=0;e<s.value[o].length;e++){const n=s.value[o][e];if(!(n.isMine&&n.isFlagged)&&!!n.isVeiled)return!1}return!0}function ue(o){const e=o.target.value;G.value=Number(e),U()}function ce(o){return o===1?"text-blue-700":o===2?"text-green-700":o===3?"text-red-700":o===4?"text-purple-700":o===5?"text-fuchsia-700":o===6?"text-cyan-600":"text-black"}function U(){I(),v.value=null,C.value=!1,D.value=!1,k.value=0,s.value=[];for(let e=0;e<_.value.rows;e++){const n=[];for(let m=0;m<_.value.cols;m++)n.push(new t({rowNum:e,colNum:m}));s.value.push(n)}let o=0;for(;o<_.value.totalMines;){const e=Math.round(Math.random()*(_.value.rows-1)),n=Math.round(Math.random()*(_.value.cols-1));s.value[e][n].isMine||(s.value[e][n].isMine=!0,s.value[e][n].around("increaseHint"),o++)}}ke(()=>{U()});const W={surfaceLight:"#c6c6c6",surfaceDark:"#C0C0C0",shadow:"#808080"};return(o,e)=>{const n=et,m=Ke,g=je,w=Be;return u(),d("div",ot,[i("div",nt,[ne(m,null,{default:ye(()=>[(u(!0),d(Q,null,B(f(l),c=>(u(),q(n,{key:c.id,value:c.id,label:c.mode},null,8,["value","label"]))),128))]),_:1}),i("select",{value:G.value,onInput:ue},[(u(!0),d(Q,null,B(f(l),c=>(u(),d("option",{value:c.id},y(c.mode==="expert"?f(h)("expert"):c.mode==="intermediate"?f(h)("intermediate"):f(h)("beginner")),9,lt))),256))],40,it)]),i("div",{class:"mt-20 flex justify-center game",onContextmenu:e[0]||(e[0]=L(()=>{},["prevent"]))},[i("div",{class:"p-2 relief",style:$e({backgroundColor:W.surfaceDark})},[i("div",at,[i("div",rt,[i("span",ut,y((f(_).totalMines-k.value).toString().padStart(3,"0")),1)]),i("div",ct,[i("button",{class:"node-btn relief player w-10 h-10","data-isGameOver":C.value,"aria-label":"Click to restart the game",onClick:U},y(C.value&&D.value?"\u{1F60E}":C.value&&!D.value?"\u{1F480}":""),9,dt)]),i("div",ht,[i("span",vt,y(Math.round(f(T)/1e3).toString().padStart(3,"0")),1)])]),i("div",mt,[(u(!0),d(Q,null,B(s.value,(c,x)=>(u(),d("div",{key:x,class:"row"},[(u(!0),d(Q,null,B(c,(r,N)=>(u(),d("button",{key:N,class:H(["node-btn",[r.isVeiled&&"relief"]]),"data-isExploded":r.isExploded,onContextmenu:L(()=>Y(()=>r.onRightClick()),["prevent"]),onDblclick:L(()=>Y(()=>r.onDoubleClick()),["prevent"]),onClick:L(()=>Y(()=>r.onLeftClick()),["prevent"])},[r.isVeiled?R("",!0):(u(),d("span",{key:0,class:H(["font-extrabold",[ce(r.hint)]])},y(r.hint===0?"":r.hint),3)),r.isExploded?(u(),d("span",_t,"\u{1F4A3}")):R("",!0),r.isFlagged?(u(),q(g,{key:2})):R("",!0),r.isQuestion?(u(),q(w,{key:3})):R("",!0)],42,ft))),128))]))),128))])],4)],32)])}}});var Nt=Se(pt,[["__scopeId","data-v-5bedaec2"]]);export{Nt as default};
